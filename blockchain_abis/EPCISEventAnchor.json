{
  "abi": [
    {
      "type": "constructor",
      "inputs": [
        {
          "name": "_requiredRole",
          "type": "string",
          "internalType": "string"
        }
      ],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "aggregations",
      "inputs": [
        {
          "name": "",
          "type": "string",
          "internalType": "string"
        }
      ],
      "outputs": [
        {
          "name": "aggregationEventHash",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "merkleRoot",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "childBatchCount",
          "type": "uint256",
          "internalType": "uint256"
        },
        {
          "name": "timestamp",
          "type": "uint256",
          "internalType": "uint256"
        },
        {
          "name": "submitter",
          "type": "address",
          "internalType": "address"
        },
        {
          "name": "exists",
          "type": "bool",
          "internalType": "bool"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "anchorAggregation",
      "inputs": [
        {
          "name": "aggregationEventHash",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "containerId",
          "type": "string",
          "internalType": "string"
        },
        {
          "name": "merkleRoot",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "childBatchCount",
          "type": "uint256",
          "internalType": "uint256"
        }
      ],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "anchorEvent",
      "inputs": [
        {
          "name": "eventHash",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "batchId",
          "type": "string",
          "internalType": "string"
        },
        {
          "name": "eventType",
          "type": "string",
          "internalType": "string"
        }
      ],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "anchored",
      "inputs": [
        {
          "name": "",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "bool",
          "internalType": "bool"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "eventMetadata",
      "inputs": [
        {
          "name": "",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "outputs": [
        {
          "name": "batchId",
          "type": "string",
          "internalType": "string"
        },
        {
          "name": "eventType",
          "type": "string",
          "internalType": "string"
        },
        {
          "name": "timestamp",
          "type": "uint256",
          "internalType": "uint256"
        },
        {
          "name": "submitter",
          "type": "address",
          "internalType": "address"
        },
        {
          "name": "exists",
          "type": "bool",
          "internalType": "bool"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "getAggregation",
      "inputs": [
        {
          "name": "containerId",
          "type": "string",
          "internalType": "string"
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "tuple",
          "internalType": "struct EPCISEventAnchor.AggregationMetadata",
          "components": [
            {
              "name": "aggregationEventHash",
              "type": "bytes32",
              "internalType": "bytes32"
            },
            {
              "name": "merkleRoot",
              "type": "bytes32",
              "internalType": "bytes32"
            },
            {
              "name": "childBatchCount",
              "type": "uint256",
              "internalType": "uint256"
            },
            {
              "name": "timestamp",
              "type": "uint256",
              "internalType": "uint256"
            },
            {
              "name": "submitter",
              "type": "address",
              "internalType": "address"
            },
            {
              "name": "exists",
              "type": "bool",
              "internalType": "bool"
            }
          ]
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "getEventMetadata",
      "inputs": [
        {
          "name": "eventHash",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "tuple",
          "internalType": "struct EPCISEventAnchor.EventMetadata",
          "components": [
            {
              "name": "batchId",
              "type": "string",
              "internalType": "string"
            },
            {
              "name": "eventType",
              "type": "string",
              "internalType": "string"
            },
            {
              "name": "timestamp",
              "type": "uint256",
              "internalType": "uint256"
            },
            {
              "name": "submitter",
              "type": "address",
              "internalType": "address"
            },
            {
              "name": "exists",
              "type": "bool",
              "internalType": "bool"
            }
          ]
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "isAnchored",
      "inputs": [
        {
          "name": "eventHash",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "bool",
          "internalType": "bool"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "requiredRole",
      "inputs": [],
      "outputs": [
        {
          "name": "",
          "type": "string",
          "internalType": "string"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "verifyMerkleProof",
      "inputs": [
        {
          "name": "containerId",
          "type": "string",
          "internalType": "string"
        },
        {
          "name": "batchDataHash",
          "type": "bytes32",
          "internalType": "bytes32"
        },
        {
          "name": "proof",
          "type": "bytes32[]",
          "internalType": "bytes32[]"
        },
        {
          "name": "index",
          "type": "uint256",
          "internalType": "uint256"
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "bool",
          "internalType": "bool"
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "event",
      "name": "AggregationAnchored",
      "inputs": [
        {
          "name": "aggregationEventHash",
          "type": "bytes32",
          "indexed": true,
          "internalType": "bytes32"
        },
        {
          "name": "containerId",
          "type": "string",
          "indexed": true,
          "internalType": "string"
        },
        {
          "name": "merkleRoot",
          "type": "bytes32",
          "indexed": false,
          "internalType": "bytes32"
        },
        {
          "name": "childBatchCount",
          "type": "uint256",
          "indexed": false,
          "internalType": "uint256"
        },
        {
          "name": "timestamp",
          "type": "uint256",
          "indexed": false,
          "internalType": "uint256"
        },
        {
          "name": "submitter",
          "type": "address",
          "indexed": true,
          "internalType": "address"
        }
      ],
      "anonymous": false
    },
    {
      "type": "event",
      "name": "EventAnchored",
      "inputs": [
        {
          "name": "eventHash",
          "type": "bytes32",
          "indexed": true,
          "internalType": "bytes32"
        },
        {
          "name": "batchId",
          "type": "string",
          "indexed": false,
          "internalType": "string"
        },
        {
          "name": "eventType",
          "type": "string",
          "indexed": false,
          "internalType": "string"
        },
        {
          "name": "timestamp",
          "type": "uint256",
          "indexed": false,
          "internalType": "uint256"
        },
        {
          "name": "submitter",
          "type": "address",
          "indexed": true,
          "internalType": "address"
        }
      ],
      "anonymous": false
    },
    {
      "type": "error",
      "name": "AggregationAlreadyAnchored",
      "inputs": [
        {
          "name": "containerId",
          "type": "string",
          "internalType": "string"
        }
      ]
    },
    {
      "type": "error",
      "name": "EventAlreadyAnchored",
      "inputs": [
        {
          "name": "eventHash",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ]
    },
    {
      "type": "error",
      "name": "EventNotFound",
      "inputs": [
        {
          "name": "eventHash",
          "type": "bytes32",
          "internalType": "bytes32"
        }
      ]
    },
    {
      "type": "error",
      "name": "InvalidMerkleRoot",
      "inputs": []
    }
  ],
  "bytecode": "0x6080604052346101f95761136580380380610019816101fd565b9283398101906020818303126101f9578051906001600160401b0382116101f9570181601f820112156101f9578051906001600160401b0382116101e55761006a601f8301601f19166020016101fd565b92828452602083830101116101f957815f9260208093018386015e8301015280516001600160401b0381116101e557600354600181811c911680156101db575b60208210146101c757601f8111610164575b50602091601f8211600114610104579181925f926100f9575b50508160011b915f199060031b1c1916176003555b60405161114290816102238239f35b015190505f806100d5565b601f1982169260035f52805f20915f5b85811061014c57508360019510610134575b505050811b016003556100ea565b01515f1960f88460031b161c191690555f8080610126565b91926020600181928685015181550194019201610114565b60035f527fc2575a0e9e593c00f959f8c92f12db2869c3395a3b0502d05e2516446f71f85b601f830160051c810191602084106101bd575b601f0160051c01905b8181106101b257506100bc565b5f81556001016101a5565b909150819061019c565b634e487b7160e01b5f52602260045260245ffd5b90607f16906100aa565b634e487b7160e01b5f52604160045260245ffd5b5f80fd5b6040519190601f01601f191682016001600160401b038111838210176101e55760405256fe6080806040526004361015610012575f80fd5b5f3560e01c9081631969d45414610d31575080634f0b58011461008a5780636dd8b45e14610c4f5780637bc2333714610ba65780637e0899d21461071b578063a54d38271461033c578063af384a7e146102ac578063ca8841861461021b578063dc62cda2146100bc5763dd6491461461008a575f80fd5b346100b85760203660031901126100b8576004355f525f602052602060ff60405f2054166040519015158152f35b5f80fd5b346100b85760203660031901126100b8576004356001600160401b0381116100b8576100ec903690600401610fed565b5f60a06040516100fb81610ecc565b828152826020820152826040820152826060820152826080820152015260ff6004604051838582376020818581016002815203019020015460a01c16156101e057602060c092826040519384928337810160028152030190206040519061016182610ecc565b8054918281526001820154916020820192835260028101546040830190815260046003830154926060850193845201549360ff60a06080860195600180831b0388168752019560a01c161515855260405195865251602086015251604085015251606084015260018060a01b03905116608083015251151560a0820152f35b610207602060405183819483830196873781015f838201520301601f198101835282610ee7565b519020627b011b60e51b5f5260045260245ffd5b346100b85760803660031901126100b8576004356001600160401b0381116100b85761024b903690600401610fed565b906044356001600160401b0381116100b857366023820112156100b85780600401356001600160401b0381116100b8573660248260051b840101116100b8576020936102a29360246064359401916024359161103a565b6040519015158152f35b346100b85760203660031901126100b8576004355f52600160205261030860405f206102d781610f08565b9060ff6102e660018301610f08565b610316600360028501549401549160405196879660a0885260a0880190610e55565b908682036020880152610e55565b60408501939093526001600160a01b038116606085015260a01c16151560808301520390f35b346100b85760603660031901126100b8576004356024356001600160401b0381116100b85761036f903690600401610fed565b91906044356001600160401b0381116100b857610390903690600401610fed565b9091835f525f60205260ff60405f20541661070857835f525f60205260405f20600160ff198254161790556040516103c781610eb1565b6103d2368784610fa8565b81526103df368486610fa8565b6020820190815260408201914283526060810192338452608082019260018452885f52600160205260405f2092518051906001600160401b03821161063657819061042a8654610e79565b601f81116106b8575b50602090601f8311600114610655575f9261064a575b50508160011b915f199060031b1c19161783555b51805160018401916001600160401b0382116106365761047d8354610e79565b601f81116105f1575b50602090601f831160011461055b5794610521946105419a98948461053399956003957e7636b56503e457eb8530f01357d80c728f42102c314ea69bc63b0d5ce899ee9f9d9a5f92610550575b50508160011b915f1990871b1c19161790555b51600282015592519201805491516001600160a81b03199092166001600160a01b03939093169290921790151560a01b60ff60a01b16179055565b6040519760608952606089019161101a565b91868303602088015261101a565b924260408201528033940390a3005b015190505f806104d3565b90601f19831691845f52815f20925f5b8181106105d95750946001856003957e7636b56503e457eb8530f01357d80c728f42102c314ea69bc63b0d5ce899ee9f9d9a956105419f9d99956105339d996105219c97106105c2575b505050811b0190556104e6565b01515f1983891b60f8161c191690555f80806105b5565b9293602060018192878601518155019501930161056b565b835f5260205f20601f840160051c8101916020851061062c575b601f0160051c01905b8181106106215750610486565b5f8155600101610614565b909150819061060b565b634e487b7160e01b5f52604160045260245ffd5b015190508c80610449565b5f8781528281209350601f198516905b8181106106a05750908460019594939210610688575b505050811b01835561045d565b01515f1960f88460031b161c191690558c808061067b565b92936020600181928786015181550195019301610665565b909150855f5260205f20601f840160051c810191602085106106fe575b90601f859493920160051c01905b8181106106f05750610433565b5f81558493506001016106e3565b90915081906106d5565b83633ed285ed60e21b5f5260045260245ffd5b346100b85760803660031901126100b8576004356024356001600160401b0381116100b85761074e903690600401610fed565b91604435926064359260ff6004604051848482376020818681016002815203019020015460a01c16610b7d578415610b6e57825f525f60205260ff60405f2054161561087f575b6108346040516107a481610ecc565b848152602081018781526004604083019288845260608101428152608082019433865260a0830194600186526040518a8a823760028b8201818152829003602001909120945185559051600185015590519083015551600382015592519201805491516001600160a81b03199092166001600160a01b03939093169290921790151560a01b60ff60a01b16179055565b81604051928392833781015f81520390209160405193845260208401524260408401527f0f4247c799a26665dcf40fee2f78d668f0dbf21bd9dd1f5084585698491f806960603394a4005b825f525f60205260405f20600160ff198254161790556040516108a181610eb1565b6108ac368484610fa8565b81526040516108bc604082610ee7565b601081526f1059d9dc9959d85d1a5bdb915d995b9d60821b60208201526020820190815260408201914283526060810192338452608082019260018452875f52600160205260405f2092518051906001600160401b0382116106365781906109248654610e79565b601f8111610b1e575b50602090601f8311600114610abb575f92610ab0575b50508160011b915f199060031b1c19161783555b51805160018401916001600160401b038211610636576109778354610e79565b601f8111610a6b575b50602090601f8311600114610a005791806109f09897969492600396945f926109f55750508160011b915f1990871b1c191617905551600282015592519201805491516001600160a81b03199092166001600160a01b03939093169290921790151560a01b60ff60a01b16179055565b610795565b015190508e806104d3565b90601f19831691845f52815f20925f5b818110610a535750926001928592600398966109f09c9b9a989610610a3c57505050811b0190556104e6565b01515f1983891b60f8161c191690558e80806105b5565b92936020600181928786015181550195019301610a10565b835f5260205f20601f840160051c81019160208510610aa6575b601f0160051c01905b818110610a9b5750610980565b5f8155600101610a8e565b9091508190610a85565b015190508c80610943565b5f8781528281209350601f198516905b818110610b065750908460019594939210610aee575b505050811b018355610957565b01515f1960f88460031b161c191690558c8080610ae1565b92936020600181928786015181550195019301610acb565b909150855f5260205f20601f840160051c81019160208510610b64575b90601f859493920160051c01905b818110610b56575061092d565b5f8155849350600101610b49565b9091508190610b3b565b639dd854d360e01b5f5260045ffd5b6040516306d8701360e21b815260206004820152918291610ba291602484019161101a565b0390fd5b346100b85760203660031901126100b8576004356001600160401b0381116100b857366023820112156100b857602080610bec60c0933690602481600401359101610fa8565b604051928184925191829101835e8101600281520301902060ff8154916001810154906002810154600460038301549201549260405195865260208601526040850152606084015260018060a01b038116608084015260a01c16151560a0820152f35b346100b8575f3660031901126100b8576040515f600354610c6f81610e79565b8084529060018116908115610d0d5750600114610caf575b610cab83610c9781850382610ee7565b604051918291602083526020830190610e55565b0390f35b60035f9081527fc2575a0e9e593c00f959f8c92f12db2869c3395a3b0502d05e2516446f71f85b939250905b808210610cf357509091508101602001610c97610c87565b919260018160209254838588010152019101909291610cdb565b60ff191660208086019190915291151560051b84019091019150610c979050610c87565b346100b85760203660031901126100b8575f608060043592610d5281610eb1565b60608152606060208201528260408201528260608201520152805f52600160205260ff600360405f20015460a01c1615610e44575f526001602052610e0f60405f2060405190610da182610eb1565b610daa81610f08565b8252610db860018201610f08565b60208301908152600360028301549260408501938452015490610e22606085019160018060a01b038416835260ff608087019460a01c1615158452604051968796602088525160a0602089015260c0880190610e55565b9051868203601f19016040880152610e55565b92516060850152516001600160a01b0316608084015251151560a08301520390f35b627b011b60e51b5f5260045260245ffd5b805180835260209291819084018484015e5f828201840152601f01601f1916010190565b90600182811c92168015610ea7575b6020831014610e9357565b634e487b7160e01b5f52602260045260245ffd5b91607f1691610e88565b60a081019081106001600160401b0382111761063657604052565b60c081019081106001600160401b0382111761063657604052565b90601f801991011681019081106001600160401b0382111761063657604052565b9060405191825f825492610f1b84610e79565b8084529360018116908115610f865750600114610f42575b50610f4092500383610ee7565b565b90505f9291925260205f20905f915b818310610f6a575050906020610f40928201015f610f33565b6020919350806001915483858901015201910190918492610f51565b905060209250610f4094915060ff191682840152151560051b8201015f610f33565b9291926001600160401b0382116106365760405191610fd1601f8201601f191660200184610ee7565b8294818452818301116100b8578281602093845f960137010152565b9181601f840112156100b8578235916001600160401b0383116100b857602083818601950101116100b857565b908060209392818452848401375f828201840152601f01601f1916010190565b929194939460ff6004604051848782376020818681016002815203019020015460a01c16156111025793925f945b868610156110dc576001908660051b850135828716155f146110b35760405190602082019283526040820152604081526110a3606082610ee7565b519020945b811c95019493611068565b9060405190602082019283526040820152604081526110d3606082610ee7565b519020946110a8565b955090925060019350602091508260405193849283378101600281520301902001541490565b5050505050505f9056fea26469706673582212206f2a49c78cb6c9b9f9c1c274e12e89d956ac7721fc24abb1e9debe2e9169d1be64736f6c634300081e0033"
}
